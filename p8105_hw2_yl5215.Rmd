---
title: "p8105_hw2_yl5215"
output: github_document
---

Load packages.

```{r, warning = FALSE, message = FALSE}
library(tidyverse)
library(readxl)
```

# Problem 2

Read and clean the Mr. Trash Wheel dataset:

1. Specify the sheet in the Excel file to omit non-data entries (rows with notes / figures; columns containing notes) using arguments in `read_excel()`.
1. Rename variable names for better clarity using `janitor::clean_names` and `rename()`.
1. Omit rows that do not include dumpster-specific data using `drop_na()`.
1. round the number of sports balls to the nearest integer and converts the result to an integer variable using `round()` and `as.integer`.

```{r}
mr_wheel_df = 
  read_excel("data/Trash Wheel Collection Data.xlsx", sheet = 1, skip = 1, range = "A2:N549") %>%
  janitor::clean_names(dat = .) %>%
  rename(.data = ., weight = weight_tons, volume = volume_cubic_yards) %>%
  drop_na(dumpster, year, date) %>%
  mutate(.data = ., sports_balls = as.integer((round(sports_balls))))
```

Read and clean the Mr. Trash Wheel dataset by following similar steps:

```{r}
prof_wheel_df = 
  read_excel("data/Trash Wheel Collection Data.xlsx", sheet = 2, skip = 1, range = "A2:M96") %>%
  janitor::clean_names(dat = .) %>%
  rename(.data = ., weight = weight_tons, volume = volume_cubic_yards) %>%
  drop_na(dumpster, year, date) %>%
  mutate(.data = ., dumpster = as.double(dumpster), year = as.character(year),  sports_balls = NA)
```

Combine `mr_wheel_df` and `prof_wheel_df` to produce a single tidy dataset using `bind_rows`. To keep track of which Trash Wheel is which, an additional variable to both datasets is added before combining.

```{r}
mr_wheel_df  = 
  mr_wheel_df %>% 
  mutate(.data = ., trash_wheel_type = "mr_trash_wheel")
prof_wheel_df =
  prof_wheel_df %>%
  mutate(.data = ., trash_wheel_type = "prof_trash_wheel") 
combine_trash_df = bind_rows(mr_wheel_df, prof_wheel_df)
```

To make a summary about the datasets:

```{r}
com_row = nrow(combine_trash_df)
com_col = ncol(combine_trash_df)

mr_row = nrow(mr_wheel_df)
pro_row = nrow(prof_wheel_df)
```

The datasets `mr_wheel_df` and `prof_wheel_df` include information about trash collected by "Mr. Trash Wheel" and "Professor Trash Wheel" respectively. `mr_wheel_df` contains `r mr_row` rows of data (observations) and `prof_wheel_df` contains `r pro_row` rows of data (observations). The dataset `combine_trash_df` is generated by combining `mr_wheel_df` and `prof_wheel_df`, and it contains `r com_row` rows (observations) and `r com_col` columns. The combined dataset `combine_trash_df` contains variables `r variable.names(combine_trash_df)`.

Below shows some example values of these variables:

```{r}
head(combine_trash_df[1:5],5)
head(combine_trash_df[6:10],5)
head(combine_trash_df[11:15],5)
```

To compute the total weight of trash collected by Professor Trash Wheel and the total number of sports balls collected by Mr. Trash Wheel in 2020:

```{r}
total_weight_prof = 
  combine_trash_df %>%
  filter(trash_wheel_type == "prof_trash_wheel") %>%
  pull(weight) %>%
  sum
```

```{r}
total_balls_mr_2020 = 
  combine_trash_df %>%
  filter(trash_wheel_type == "mr_trash_wheel", year == "2020") %>%
  pull(sports_balls) %>%
  na.omit() %>%
  sum
```

Therefore, the total weight of trash collected by Professor Trash Wheel is `r total_weight_prof` tons and the total number of sports balls collected by Mr. Trash Wheel in 2020 is `r total_balls_mr_2020`.

